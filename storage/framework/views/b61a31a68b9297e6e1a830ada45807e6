<?php if(isset($model)): ?>
<?php echo Form::model($model, ['method' => 'PUT', 'files' => true, 'route' => ['admin.sqoptions.update', $model->id]]); ?>

<?php else: ?>
<?php echo Form::open(['files' => true, 'route' => 'admin.sqoptions.store']); ?>

<?php endif; ?>

	<div class="form-group">
		<?php echo Form::label('service_question_id', 'Service Question:'); ?>		
		<?php echo Form::select('service_question_id',$question, null, ['class' => 'form-control']); ?>

		<?php echo $errors->first('service_question_id', '<div class="text-danger">:message</div>'); ?>

	</div>

	<div class="form-group">
		<?php echo Form::label('option_type', 'Options Type:'); ?>		
		<?php echo Form::select('option_type',$op_type, null, ['class' => 'form-control']); ?>

		<?php echo $errors->first('option_type', '<div class="text-danger">:message</div>'); ?>

		
	</div>
	<div id='TextBoxesGroup'>

		<?php if(!empty($optionArr)){
				foreach($optionArr as $k=>$optionData){ ?>
						
			<div id="TextBoxDiv1" class="form-group address hclass sh<?php echo $k; ?>">
		
				<label>Option : </label><input type='text' name="options[<?php echo $k; ?>]" maxlength="100" id='textbox1' class='form-control'value="<?php echo $optionData->option; ?>" >
				<div class="inputRemove">&times;</div>
				<div class="disableOption"><input type="checkbox" value="1"  name="optioncks[<?php echo $k; ?>]" <?php if( $optionData->status == 1 ){echo "checked=checked";}?>> Do you want to disable it? </div>
			</div>
		<?php }	
		}else{ ?>
			<div id="TextBoxDiv1" class="form-group address hclass sh">
		
				<label>Option : </label><input type='text' name="options[0]" maxlength="100" id='textbox1' class='form-control' >
				<div class="inputRemove">&times;</div>
				<div class="disableOption"><input type="checkbox" value="1"  name="optioncks[0]"> Do you want to disable it? </div>
			</div>
			
			
		<?php }	?>
		
    </div>
	
	 <button type ="button" class="btn btn-primary" id="addButton"><i class="glyphicon glyphicon-plus"></i> Add More Options</button>
	<div class="space"></div>
	

	<div class="form-group">
		<?php echo Form::submit(isset($model) ? 'Update' : 'Save', ['class' => 'btn btn-primary']); ?>

	</div>
<?php echo Form::close(); ?>






<?php $__env->startSection('script'); ?>
	
	<?php echo script('vendor/ckeditor/ckeditor.js'); ?>

	<?php echo script('vendor/ckfinder/ckfinder.js'); ?>

	
	<script type="text/javascript">
		CKEDITOR.editorConfig = function( config ) {
			var prefix = '/<?php echo option("ckfinder.prefix"); ?>';

		   config.filebrowserBrowseUrl = prefix + '/vendor/ckfinder/ckfinder.html';
		   config.filebrowserImageBrowseUrl = prefix + '/vendor/ckfinder/ckfinder.html?type=Images';
		   config.filebrowserFlashBrowseUrl = prefix + '/vendor/ckfinder/ckfinder.html?type=Flash';
		   config.filebrowserUploadUrl = prefix + '/vendor/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files';
		   config.filebrowserImageUploadUrl = prefix + '/vendor/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images';
		   config.filebrowserFlashUploadUrl = prefix + '/vendor/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash';
		};

		var editor = CKEDITOR.replace( 'ckeditor' );
		var prefix = '/<?php echo option("ckfinder.prefix"); ?>';
		CKFinder.setupCKEditor( editor, prefix + '/vendor/ckfinder/') ;
	</script>
	
	
	
	<script type="text/javascript">
	
	var counter = 0;
	<?php if(!empty($k)){
		?>
		var initialCounter = '<?php echo $k; ?>';
		counter = initialCounter;
		
	<?php } ?>
		
		console.log(counter);
		// $('#TextBoxesGroup')
    $("#addButton").click(function () {
				
	if(counter>10){
            alert("Only 10 textboxes allow");
            return false;
	}   
	counter++;	
	var newTextBoxDiv = $(document.createElement('div'))
	     .attr({
			 id:'TextBoxDiv' + counter,
			 class:'form-group address hclass'
		 });
                
	newTextBoxDiv.after().html('<label>Option : </label>' +
	      '<input type="text" maxlength = "100"  name="options[' + counter + 
	      ']" id="textbox' + counter + '" value="" class="form-control"><div class="inputRemove">&times;</div><div class="disableOption"><input type="checkbox" value="1"  name="optioncks['+counter+']"> Do you want to disable it? </div>');
            
	newTextBoxDiv.appendTo("#TextBoxesGroup");

				
	
	
     });
	 $(document).on("click",".address .inputRemove",function(){
	   $(this).closest(".address").remove(); 
	   counter--;
	   if(counter==0){
		   $('.inputRemove').hide();
	   } 
	 
	 });
	</script>
	
	<script type="text/javascript">
	$(document).ready(function(){
	<?php if(!empty($optId)){ ?>
   var optId = "<?php echo $optId;  ?>";
   function hideElements()
	{
		$('.hclass,#addButton').hide();
	}
	function showElements(optId)
	{
		$('.sh'+optId).show();
		//$('input[name="options['+optId+']"]').closest( ".hclass" ).show();
	} 
	
	if(( typeof optId !== 'undefined') && (optId != "" )) {
		
		hideElements();
		showElements(optId);
		
    // optId could get resolved and it's defined
     }
	<?php } ?>
	
}); 
	
	</script>
<?php $__env->stopSection(); ?>


<style>
.space{
	height:15px !important;
	width:100%;}
.address{
	position: relative;
}
#TextBoxesGroup div {
    line-height: 1;
}
.address input[type=text] {
	
    padding-right:25px !important;    
}
.inputRemove {
  bottom: 37px;
  cursor: pointer;
  display: inline-block;
  font-size: 36px;
  left: 1072px;
  position: relative !important;
}
.disableOption {
    bottom: 42px;
    cursor: pointer;
    display: inline-block;
    font-size: 19px;
    left: 828px;
    position: relative !important;
}
.inputRemove:hover{
    color:#DD3366;
}</style>
