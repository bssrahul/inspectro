<?php if(isset($model)): ?>
<?php echo Form::model($model, ['method' => 'PUT', 'files' => true, 'route' => ['admin.categories.update', $model->id]]); ?>

<?php else: ?>
<?php echo Form::open(['files' => true, 'route' => 'admin.categories.store']); ?>

<?php endif; ?>
	<div class="form-group">
		<?php echo Form::label('title', 'Title:'); ?>

		<?php echo Form::text('title', null, ['class' => 'form-control']); ?>

		<?php echo $errors->first('title', '<div class="text-danger">:message</div>'); ?>

	</div>
	
	<div class="form-group">
		<?php echo Form::label('status', 'Description:'); ?>

		<?php echo Form::textarea('description', null, ['class' => 'form-control', 'id' => 'ckeditor']); ?>

		<?php echo $errors->first('description', '<div class="text-danger">:message</div>'); ?>

	</div>
	
	<?php if(!empty($id)): ?>
	<div class="form-group">

		<?php echo Form::hidden('parent_id',$id,null,['class' => 'form-control']); ?>

		
	</div>
	<?php else: ?>
	<div class="form-group">

		<?php echo Form::hidden('parent_id',null,['class' => 'form-control']); ?>

		
	</div>
	<?php endif; ?>
	<?php if(!empty($type)): ?>
	<div class="form-group">
		<?php echo Form::label('type', 'Type:'); ?>

		<?php echo Form::text('type',$type,['class' => 'form-control','readonly'=>'true']); ?>

		<?php echo $errors->first('type', '<div class="text-danger">:message</div>'); ?>

	</div>
	
	<?php if($type=='question'): ?>
	<div class="form-group" id='sortingKey'>
		<?php echo Form::label('sorting_key', 'Sort Key:'); ?>

		<?php echo Form::number('sorting_key', null, ['class' => 'form-control']); ?>

		<?php echo $errors->first('sorting_key', '<div class="text-danger">:message</div>'); ?>

	</div>
	<?php endif; ?>
	<?php else: ?>
	<div class="form-group">
		<?php echo Form::label('type', 'Type:'); ?>

		<?php echo Form::text('type',null,['class' => 'form-control','id'=>'type','readonly'=>'true']); ?>

		<?php echo $errors->first('type', '<div class="text-danger">:message</div>'); ?>

	</div>
	<?php endif; ?>
	<div class="form-group">
		<?php echo Form::submit(isset($model) ? 'Update' : 'Save', ['class' => 'btn btn-primary']); ?>

	</div>
<?php echo Form::close(); ?>

<?php $__env->startSection('script'); ?>
	
	<?php echo script('vendor/ckeditor/ckeditor.js'); ?>

	<?php echo script('vendor/ckfinder/ckfinder.js'); ?>

	
	<script type="text/javascript">
		CKEDITOR.editorConfig = function( config ) {
			var prefix = '/<?php echo option("ckfinder.prefix"); ?>';

		   config.filebrowserBrowseUrl = prefix + '/vendor/ckfinder/ckfinder.html';
		   config.filebrowserImageBrowseUrl = prefix + '/vendor/ckfinder/ckfinder.html?type=Images';
		   config.filebrowserFlashBrowseUrl = prefix + '/vendor/ckfinder/ckfinder.html?type=Flash';
		   config.filebrowserUploadUrl = prefix + '/vendor/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files';
		   config.filebrowserImageUploadUrl = prefix + '/vendor/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images';
		   config.filebrowserFlashUploadUrl = prefix + '/vendor/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash';
		};

		var editor = CKEDITOR.replace( 'ckeditor' );
		var prefix = '/<?php echo option("ckfinder.prefix"); ?>';
		CKFinder.setupCKEditor( editor, prefix + '/vendor/ckfinder/') ;
	</script>

	
<?php $__env->stopSection(); ?>